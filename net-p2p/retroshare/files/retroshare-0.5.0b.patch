diff '--exclude=.svn' -urN RetroShare_clean/branches/v0.5.0/retroshare-gui/src//RetroShare.pro v0.5.0.svn/retroshare-gui/src//RetroShare.pro
--- RetroShare_clean/branches/v0.5.0/retroshare-gui/src//RetroShare.pro	2010-05-06 01:50:58.133318309 +0200
+++ v0.5.0.svn/retroshare-gui/src//RetroShare.pro	2010-05-09 15:50:06.782092894 +0200
@@ -19,8 +19,23 @@
 linux-* {
 	CONFIG += version_detail_bash_script
 	QMAKE_CXXFLAGS *= -D_FILE_OFFSET_BITS=64
-	LIBS += ../../libretroshare/src/lib/libretroshare.a
+
+        isEmpty(PREFIX) {
+                PREFIX = /usr
+        }
+
+        system(which gpgme-config >/dev/null 2>&1) {
+        QMAKE_CXXFLAGS += $$system(gpgme-config --cflags)
+        } else {
+                error(Could not find gpgme.h on your system.)
+        }
+       # INCLUDEPATH += "../"                            # FIXME? workaround for reaching util/rsversion.h
+
+        LIBS += $${PREFIX}/lib/libretroshare.a
         LIBS += -lssl -lgpgme -lupnp
+
+        target.path = $${PREFIX}/bin
+        INSTALLS *= target
 }
 
 linux-g++ {
