diff -urN --exclude='*~' OpenJPEG.orig/libopenjpeg/t1.c OpenJPEG/libopenjpeg/t1.c
--- OpenJPEG.orig/libopenjpeg/t1.c	2007-02-21 01:57:27.000000000 -0600
+++ OpenJPEG/libopenjpeg/t1.c	2007-04-02 01:24:51.000000000 -0500
@@ -543,11 +543,8 @@
 	
 	cblk->numbps = max ? (int_floorlog2(max) + 1) - T1_NMSEDEC_FRACBITS : 0;
 	
-	/* Changed by Dmitry Kolyadin */
-	for (i = 0; i <= w; i++) {
-		for (j = 0; j <= h; j++) {
-			t1->flags[j][i] = 0;
-		}
+	for (i = 0; i <= h; ++i) {
+		memset(&t1->flags[i], 0, (w+1) * sizeof(int));
 	}
 	
 	bpno = cblk->numbps - 1;
@@ -643,7 +640,7 @@
 }
 
 static void t1_decode_cblk(opj_t1_t *t1, opj_tcd_cblk_t * cblk, int orient, int roishift, int cblksty) {
-	int i, j, w, h;
+	int i, w, h;
 	int bpno, passtype;
 	int segno, passno;
 	char type = T1_TYPE_MQ; /* BYPASS mode */
@@ -654,18 +651,12 @@
 	w = cblk->x1 - cblk->x0;
 	h = cblk->y1 - cblk->y0;
 	
-	/* Changed by Dmitry Kolyadin */
-	for (j = 0; j <= h; j++) {
-		for (i = 0; i <= w; i++) {
-			t1->flags[j][i] = 0;
-		}
+	for (i = 0; i <= h; ++i) {
+		memset(&t1->flags[i], 0, (w + 1) * sizeof(int));
 	}
 	
-	/* Changed by Dmitry Kolyadin */
-	for (i = 0; i < w; i++) {
-		for (j = 0; j < h; j++){
-			t1->data[j][i] = 0;
-		}
+	for (i = 0; i < h; ++i) {
+		memset(&t1->data[i], 0, w * sizeof(int));
 	}
 	
 	bpno = roishift + cblk->numbps - 1;
